# Agents 当前功能独立总结（2026-02-13）

## 1. 当前定位

- 形态：`FastAPI + React 19` 的开发者导向 AI 工作台。
- 存储：`Markdown + YAML frontmatter` 作为主存储，`ChromaDB` 作为 RAG/记忆向量层。
- 协议：聊天主链路使用 `SSE` 流式返回。

## 2. 已上线核心功能

### 2.1 对话与会话管理

- 流式聊天、文件附件上传/下载、消息删除、消息原地编辑、重新生成。
- 会话管理：新建、删除、重命名、保存临时会话、模型/助手切换、参数覆盖。
- 会话组织：文件夹分组、拖拽排序、会话移动/复制/重复。
- 会话分支：支持从指定消息分叉为新会话。
- 会话检索与迁移：全文搜索、Markdown 导出、ChatGPT(`.json/.zip`) 与 Markdown 导入。
- 上下文能力：上下文压缩、后续问题建议、自动标题生成。
- 模型对比：同一输入多模型并行 Compare（流式对比输出）。

### 2.2 模型与助手体系

- 提供商与模型 CRUD（当前支持 DeepSeek/OpenRouter/OpenAI/Anthropic/Ollama/XAI）。
- 助手 CRUD（提示词、图标、参数、默认模型等）。
- 会话级参数覆盖（temperature/top_p/max_tokens/reasoning_effort 等）。
- 费用追踪与上下文用量可视化。

### 2.3 RAG 知识库

- 知识库 CRUD 与文档管理。
- 文档上传处理链路：解析、分块、嵌入、向量入库。
- 已支持文档类型：`TXT/MD/PDF/DOCX/HTML`。
- 助手绑定知识库（`knowledge_base_ids`），对话检索注入来源。

### 2.4 记忆系统

- 全局记忆与助手级记忆。
- 自动记忆提取（对话后后台写入）。
- 记忆 CRUD、检索与上下文注入。
- 记忆开关与检索参数可配置。

### 2.5 翻译与语音

- 对话内流式翻译（可配置翻译模型/提示词）。
- TTS 文本转语音（edge-tts），支持语音、语速、音量等配置。
- 前端可直接播放/停止语音。

### 2.6 项目工作区（Project）

- 项目 CRUD 与服务端目录选择。
- 文件树浏览、文件读取/创建/写入、重命名/移动、删除。
- 目录创建/删除、项目内文件搜索（含邻近性排序）。
- 项目上下文下可直接发起聊天。

### 2.7 前端与设置能力

- 模块化前端：`chat / projects / settings / developer`。
- i18n：已支持 `en / zh-CN`。
- 全局命令面板：`Ctrl/Cmd + K`。
- 设置页覆盖：模型、助手、提供商、搜索、网页、标题、后续问题、压缩、文件引用、翻译、TTS、RAG、知识库、Prompt 模板、记忆、开发者模式。

## 3. 当前主要缺口

- 容器化已具备基础能力（`Dockerfile.backend`、`Dockerfile.frontend`、`docker-compose.yml`），但生产化部署模板仍可继续完善（镜像优化、反向代理、分环境编排）。
- 多用户能力：认证、权限、租户/团队协作尚未落地。
- MCP 客户端与插件生态：尚未接入。
- 语音输入（STT）、图像生成仍未上线。
- 会话分支当前为“分叉新会话”，尚未形成完整树状分支视图。

## 4. 阶段判断

- 已从“轻量聊天工具”进入“可用的开发者 AI 工作台”阶段。
- 下一阶段重点应从“补功能”转向“平台化能力与质量治理”（部署、认证、MCP、RAG/记忆质量评估）。
